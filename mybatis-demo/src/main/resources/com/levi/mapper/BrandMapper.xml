<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- namespace：名称空间  -->
<mapper namespace="com.levi.mapper.BrandMapper">
    <!--
      当数据库表中的属性名和类中的属性名不匹配时（包括驼峰与下划线不匹配），mybatis不会进行自动封装
      解决方案：
      1. 在sql中为不匹配的属性起别名，让别名和实体中属性名相同即可，缺点是每次查询都要定义别名,解决方案是定义sql片段；
      2. resultMap:
        1. 定义<resultMap>
        2. 使用resultMap替换<select>中的resultType属性
      -->
    <!--  sql片段  -->
    <sql id="brandColumn">id,brand_name brandName, company_name companyName, ordered, description, status</sql>

    <!--
    resultMap
    id：唯一标识
    type：映射的类型
     -->
    <resultMap id="brandResultMap" type="com.levi.pojo.Brand">
    <!--   主键字段映射     -->
<!--        <id></id>-->
        <!--
        一般字段映射
             column：表的列名
             property：实体类的属性名
         -->
        <result column="brand_name" property="brandName" />
        <result column="company_name" property="companyName" />
    </resultMap>

    <!--  不使用resultMap   -->
<!--    <select id="selectAllBrands" resultType="com.levi.pojo.Brand">-->
<!--        select * from tb_brand;-->
<!--        select id,brand_name brandName, company_name companyName, ordered, description, status from tb_brand;-->
<!--        select-->
<!--            <include refid="brandColumn"></include>-->
<!--        from tb_brand;-->
<!--    </select>-->


    <!--  使用resultMap  -->
    <select id="selectAllBrands" resultMap="brandResultMap">
        <!--        select * from tb_brand;-->
        <!--        select id,brand_name brandName, company_name companyName, ordered, description, status from tb_brand;-->
        <!--        select-->
        <!--            <include refid="brandColumn"></include>-->
        <!--        from tb_brand;-->
        select * from tb_brand;
    </select>

    <!--
        *参数占位符
        1. #{}：会将参数替换为?，防止sql注入
        2. ${}：简单的sql字符串拼接，存在注入风险
        3. 适用场景：
            * 参数传递时：#{}
            * 属性不固定：使用Mapper定义方法中的参数灵活传参，拼接字符串（因为参数是内部自己定义的，所以不存在注入问题）；
        *参数类型 parameterType属性，可以省略
        *特殊字符处理
            1.转义字符：单个特殊字符
            2.CDATA区：多个特殊字符

    -->
<!--    <select id="selectBrandById" parameterType="int" resultMap="brandResultMap">-->
<!--        select * from tb_brand where id=#{id};-->
<!--    </select>-->

    <select id="selectBrandById" parameterType="int" resultMap="brandResultMap">
        select * from tb_brand where id &lt; #{id};
<!--        select * from tb_brand where id-->
<!--        <![CDATA[-->
<!--             <-->
<!--        ]]> #{id};-->
    </select>
</mapper>